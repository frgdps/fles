<!DOCTYPE html>
<html lang="en" data-theme="ocean">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Clock Studio – Modern Analog Clock</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css  " />
  <style>
    /* ===== CSS RESET & BASE ===== */
    *, *::before, *::after {
      box-sizing: border-box;
    }
    :root {
      /* Default theme (ocean) */
      --primary: #0891b2;
      --primary-light: #06b6d4;
      --secondary: #0e7490;
      --accent: #0ea5e9;
      --bg-gradient-start: #e0f2fe;
      --bg-gradient-end: #bae6fd;
      --card-bg: rgba(224, 242, 254, 0.85);
      --card-border: rgba(186, 230, 253, 0.5);
      --text-primary: #0c4a6e;
      --text-secondary: #075985;
      --shadow: rgba(14, 165, 233, 0.15);
      --glass: rgba(255, 255, 255, 0.7);
      /* Clock */
      --clock-face: #f0f9ff;
      --clock-border: #bae6fd;
      --hour-hand: #0c4a6e;
      --minute-hand: #075985;
      --second-hand: #0ea5e9;
      --clock-center: #0c4a6e;
      --clock-numbers: #0c4a6e;
      --clock-ticks: #7dd3fc;
      /* Sizes */
      --clock-size: 320px;
      --hand-width-hour: 6px;
      --hand-width-minute: 4px;
      --hand-width-second: 2px;
      --transition-speed: 0.3s;
    }

    [data-theme="dark"] {
      --bg-gradient-start: #0f172a;
      --bg-gradient-end: #1e293b;
      --card-bg: rgba(30, 41, 59, 0.85);
      --card-border: rgba(100, 116, 139, 0.3);
      --text-primary: #f1f5f9;
      --text-secondary: #94a3b8;
      --shadow: rgba(0, 0, 0, 0.3);
      --glass: rgba(30, 41, 59, 0.7);
      --clock-face: #1e293b;
      --clock-border: #334155;
      --hour-hand: #f1f5f9;
      --minute-hand: #cbd5e1;
      --second-hand: #ef4444;
      --clock-center: #f1f5f9;
      --clock-numbers: #f1f5f9;
      --clock-ticks: #475569;
    }

    [data-theme="sunset"] {
      --primary: #ea580c;
      --primary-light: #f97316;
      --secondary: #c2410c;
      --accent: #f97316;
      --bg-gradient-start: #fff7ed;
      --bg-gradient-end: #ffedd5;
      --card-bg: rgba(255, 247, 237, 0.85);
      --card-border: rgba(255, 237, 213, 0.5);
      --shadow: rgba(249, 115, 22, 0.15);
      --clock-face: #fffbeb;
      --clock-border: #ffedd5;
      --hour-hand: #7c2d12;
      --minute-hand: #9a3412;
      --second-hand: #f97316;
      --clock-center: #7c2d12;
      --clock-numbers: #7c2d12;
      --clock-ticks: #fdba74;
    }

    [data-theme="forest"] {
      --primary: #16a34a;
      --primary-light: #22c55e;
      --secondary: #15803d;
      --accent: #4ade80;
      --bg-gradient-start: #f0fdf4;
      --bg-gradient-end: #dcfce7;
      --card-bg: rgba(240, 253, 244, 0.85);
      --card-border: rgba(220, 252, 231, 0.5);
      --shadow: rgba(74, 222, 128, 0.15);
      --clock-face: #f0fdf4;
      --clock-border: #dcfce7;
      --hour-hand: #14532d;
      --minute-hand: #166534;
      --second-hand: #4ade80;
      --clock-center: #14532d;
      --clock-numbers: #14532d;
      --clock-ticks: #86efac;
    }

    body {
      font-family: 'Inter', system-ui, sans-serif;
      background: linear-gradient(135deg, var(--bg-gradient-start), var(--bg-gradient-end));
      color: var(--text-primary);
      min-height: 100vh;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      transition: background var(--transition-speed), color var(--transition-speed);
      line-height: 1.5;
    }

    .app-container {
      max-width: 1400px;
      width: 100%;
      margin: 0 auto;
      padding: 20px;
      flex: 1;
    }

    /* ===== HEADER ===== */
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
      padding: 16px 24px;
      background: var(--card-bg);
      backdrop-filter: blur(12px);
      border-radius: 16px;
      border: 1px solid var(--card-border);
      box-shadow: 0 8px 32px var(--shadow);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo i {
      font-size: 28px;
      color: var(--primary);
    }

    .logo h1 {
      font-size: 24px;
      font-weight: 700;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .theme-selector {
      display: flex;
      gap: 10px;
    }

    .theme-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s, box-shadow 0.2s;
      background: var(--card-bg);
    }

    .theme-btn:hover {
      transform: scale(1.15);
    }

    .theme-btn.active {
      box-shadow: 0 0 0 3px var(--primary);
    }

    /* ===== MAIN LAYOUT ===== */
    .main-content {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 30px;
    }

    @media (max-width: 968px) {
      .main-content {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--card-bg);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      border: 1px solid var(--card-border);
      box-shadow: 0 8px 32px var(--shadow);
      padding: 30px;
      transition: transform var(--transition-speed), box-shadow var(--transition-speed);
    }

    .card:hover {
      transform: translateY(-6px);
      box-shadow: 0 12px 40px var(--shadow);
    }

    /* ===== CLOCK ===== */
    .clock-wrapper {
      position: relative;
      width: var(--clock-size);
      height: var(--clock-size);
      margin: 0 auto 30px;
    }

    .clock {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: var(--clock-face);
      border: 8px solid var(--clock-border);
      box-shadow: 0 10px 30px rgba(0,0,0,0.1), inset 0 2px 10px rgba(0,0,0,0.05);
      position: relative;
      overflow: hidden;
    }

    .clock.modern {
      border: none;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .clock.minimal {
      border: 2px solid var(--clock-border);
      background: transparent;
    }

    .clock.roman {
      border: 12px solid var(--clock-border);
      box-shadow: 0 10px 30px rgba(0,0,0,0.15), inset 0 0 20px rgba(0,0,0,0.05);
    }

    .clock-face {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .clock-number {
      position: absolute;
      font-size: 18px;
      font-weight: 700;
      color: var(--clock-numbers);
      pointer-events: none;
    }

    /* Position numbers using trigonometry via CSS transforms */
    .clock-number:nth-child(1) { transform: translateY(-120px); }
    .clock-number:nth-child(2) { transform: rotate(30deg) translateY(-120px) rotate(-30deg); }
    .clock-number:nth-child(3) { transform: rotate(60deg) translateY(-120px) rotate(-60deg); }
    .clock-number:nth-child(4) { transform: rotate(90deg) translateY(-120px) rotate(-90deg); }
    .clock-number:nth-child(5) { transform: rotate(120deg) translateY(-120px) rotate(-120deg); }
    .clock-number:nth-child(6) { transform: rotate(150deg) translateY(-120px) rotate(-150deg); }
    .clock-number:nth-child(7) { transform: rotate(180deg) translateY(-120px) rotate(-180deg); }
    .clock-number:nth-child(8) { transform: rotate(210deg) translateY(-120px) rotate(-210deg); }
    .clock-number:nth-child(9) { transform: rotate(240deg) translateY(-120px) rotate(-240deg); }
    .clock-number:nth-child(10) { transform: rotate(270deg) translateY(-120px) rotate(-270deg); }
    .clock-number:nth-child(11) { transform: rotate(300deg) translateY(-120px) rotate(-300deg); }
    .clock-number:nth-child(12) { transform: rotate(330deg) translateY(-120px) rotate(-330deg); }

    .hand {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform-origin: bottom center;
      border-radius: 10px;
      transition: transform 0.5s cubic-bezier(0.4, 2.3, 0.8, 1);
    }

    .hour-hand {
      width: var(--hand-width-hour);
      height: 25%;
      background: var(--hour-hand);
      margin-left: calc(-1 * var(--hand-width-hour) / 2);
    }

    .minute-hand {
      width: var(--hand-width-minute);
      height: 35%;
      background: var(--minute-hand);
      margin-left: calc(-1 * var(--hand-width-minute) / 2);
    }

    .second-hand {
      width: var(--hand-width-second);
      height: 40%;
      background: var(--second-hand);
      margin-left: calc(-1 * var(--hand-width-second) / 2);
    }

    .clock-center {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 14px;
      height: 14px;
      background: var(--clock-center);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
    }

    /* ===== CONTROLS & DISPLAY ===== */
    .digital-time {
      font-size: 36px;
      font-weight: 700;
      margin: 0 0 10px;
      text-align: center;
      font-variant-numeric: tabular-nums;
      letter-spacing: 1px;
    }

    .date-display {
      font-size: 18px;
      color: var(--text-secondary);
      margin-bottom: 24px;
      text-align: center;
    }

    .location-display {
      font-size: 16px;
      color: var(--text-secondary);
      margin-bottom: 24px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .location-display i {
      color: var(--primary);
    }

    .clock-controls, .clock-styles {
      display: flex;
      justify-content: center;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 24px;
    }

    .btn {
      padding: 10px 20px;
      border-radius: 12px;
      border: none;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: all var(--transition-speed);
      background: var(--primary);
      color: white;
    }

    .btn:hover {
      background: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .btn-secondary {
      background: transparent;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    .btn-secondary:hover {
      background: var(--primary);
      color: white;
    }

    .clock-style {
      width: 50px;
      height: 50px;
      border-radius: 12px;
      border: 2px solid transparent;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all var(--transition-speed);
      background: var(--card-bg);
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }

    .clock-style:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(0,0,0,0.1);
    }

    .clock-style.active {
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.2);
    }

    .sound-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: transform var(--transition-speed);
    }

    .sound-toggle:hover {
      transform: scale(1.1);
    }

    .sound-toggle.active {
      color: var(--primary);
    }

    /* ===== TABS & INFO ===== */
    .tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid var(--card-border);
      flex-wrap: wrap;
    }

    .tab {
      padding: 10px 20px;
      border-radius: 12px 12px 0 0;
      background: transparent;
      border: none;
      font-weight: 600;
      cursor: pointer;
      color: var(--text-secondary);
      transition: all var(--transition-speed);
    }

    .tab.active {
      color: var(--primary);
      background: var(--card-bg);
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
    }

    .info-card {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 12px var(--shadow);
    }

    .info-card h3 {
      margin-bottom: 16px;
      font-size: 20px;
      color: var(--primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    @media (max-width: 480px) {
      .info-grid {
        grid-template-columns: 1fr;
      }
    }

    .info-item {
      background: rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 15px;
      border: 1px solid rgba(255,255,255,0.1);
    }

    .info-label {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 4px;
    }

    .info-value {
      font-size: 20px;
      font-weight: 700;
    }

    .progress-container {
      height: 8px;
      background: rgba(0,0,0,0.05);
      border-radius: 4px;
      margin-top: 8px;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      border-radius: 4px;
      transition: width 1s linear;
    }

    .world-clock-item, .pomodoro-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      margin-bottom: 12px;
    }

    .pomodoro-controls {
      display: flex;
      gap: 12px;
      margin-top: 16px;
    }

    .pomodoro-timer {
      font-size: 48px;
      font-weight: 700;
      font-variant-numeric: tabular-nums;
    }

    /* ===== NEW FEATURES ===== */
    .day-counter-container, .stopwatch-container, .alarm-container, .countdown-container, .timezone-container, .event-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .day-counter-display, .stopwatch-display, .countdown-display, .event-display {
      font-size: 42px;
      font-weight: 700;
      text-align: center;
      padding: 16px;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      font-variant-numeric: tabular-nums;
    }

    .day-counter-controls, .stopwatch-controls, .alarm-controls, .countdown-controls, .timezone-controls, .event-controls {
      display: flex;
      gap: 12px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .alarm-list {
      max-height: 200px;
      overflow-y: auto;
      margin-top: 16px;
    }

    .alarm-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      margin-bottom: 8px;
    }

    .alarm-time {
      font-weight: 700;
      font-size: 18px;
    }

    .alarm-label {
      color: var(--text-secondary);
      font-size: 14px;
    }

    .lap-list {
      max-height: 150px;
      overflow-y: auto;
      margin-top: 16px;
    }

    .lap-item {
      display: flex;
      justify-content: space-between;
      padding: 8px 12px;
      background: rgba(255,255,255,0.05);
      border-radius: 8px;
      margin-bottom: 6px;
    }

    .input-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-bottom: 16px;
    }

    .input-group label {
      font-weight: 600;
      color: var(--text-secondary);
    }

    .input-group input, .input-group select {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid var(--card-border);
      background: var(--card-bg);
      color: var(--text-primary);
    }

    /* Location-specific styles */
    .location-status {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 14px;
      margin-left: 5px;
    }

    .location-status.loading {
      color: var(--primary);
    }

    .location-status.error {
      color: #ef4444;
    }

    .location-status.success {
      color: #22c55e;
    }

    /* Timezone converter styles */
    .timezone-result {
      margin-top: 16px;
      padding: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      text-align: center;
    }

    .timezone-result-time {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .timezone-result-info {
      color: var(--text-secondary);
      font-size: 14px;
    }

    /* Fullscreen button */
    .fullscreen-btn {
      position: absolute;
      top: 20px;
      right: 70px;
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.05);
      transition: transform var(--transition-speed);
    }

    .fullscreen-btn:hover {
      transform: scale(1.1);
    }

    /* Auto theme switch styles */
    .auto-theme-container {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 20px;
    }

    .toggle-switch {
      position: relative;
      width: 50px;
      height: 24px;
      background: var(--card-border);
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .toggle-switch.active {
      background: var(--primary);
    }

    .toggle-slider {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.3s;
    }

    .toggle-switch.active .toggle-slider {
      transform: translateX(26px);
    }

    /* Event countdown styles */
    .event-list {
      max-height: 200px;
      overflow-y: auto;
      margin-top: 16px;
    }

    .event-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 12px;
      margin-bottom: 8px;
    }

    .event-name {
      font-weight: 700;
      font-size: 18px;
    }

    .event-date {
      color: var(--text-secondary);
      font-size: 14px;
    }

    /* ===== FOOTER ===== */
    footer {
      text-align: center;
      padding: 20px;
      color: var(--text-secondary);
      font-size: 14px;
      margin-top: auto;
    }
  </style>
</head>
<body>
  <div class="app-container">
    <header>
      <div class="logo">
        <i class="fa-solid fa-clock"></i>
        <h1>Jam</h1>
      </div>
      <div class="theme-selector" role="group" aria-label="Theme selector">
        <button class="theme-btn dark" data-theme="dark" title="Dark Theme" aria-label="Dark Theme">
          <i class="fa-solid fa-moon"></i>
        </button>
        <button class="theme-btn ocean active" data-theme="ocean" title="Ocean Theme" aria-label="Ocean Theme">
          <i class="fa-solid fa-water"></i>
        </button>
        <button class="theme-btn sunset" data-theme="sunset" title="Sunset Theme" aria-label="Sunset Theme">
          <i class="fa-solid fa-cloud-sun"></i>
        </button>
        <button class="theme-btn forest" data-theme="forest" title="Forest Theme" aria-label="Forest Theme">
          <i class="fa-solid fa-tree"></i>
        </button>
      </div>
    </header>

    <div class="main-content">
      <div class="card">
        <div class="clock-wrapper">
          <div class="clock classic" id="analogClock">
            <div class="clock-face">
              <div class="clock-number">12</div>
              <div class="clock-number">1</div>
              <div class="clock-number">2</div>
              <div class="clock-number">3</div>
              <div class="clock-number">4</div>
              <div class="clock-number">5</div>
              <div class="clock-number">6</div>
              <div class="clock-number">7</div>
              <div class="clock-number">8</div>
              <div class="clock-number">9</div>
              <div class="clock-number">10</div>
              <div class="clock-number">11</div>
            </div>
            <div class="hand hour-hand" id="hourHand"></div>
            <div class="hand minute-hand" id="minuteHand"></div>
            <div class="hand second-hand" id="secondHand"></div>
            <div class="clock-center"></div>
          </div>
          <button class="sound-toggle active" id="soundToggle" title="Toggle Sound" aria-label="Toggle sound">
            <i class="fa-solid fa-volume-high"></i>
          </button>
          <button class="fullscreen-btn" id="fullscreenBtn" title="Fullscreen" aria-label="Fullscreen">
            <i class="fa-solid fa-expand"></i>
          </button>
        </div>

        <div class="digital-time" id="digitalTime">00:00:00</div>
        <div class="date-display" id="dateDisplay">—</div>
        <div class="location-display" id="locationDisplay">
          <i class="fa-solid fa-location-dot"></i>
          <span id="locationText">Detecting location...</span>
          <span id="locationStatus" class="location-status loading">
            <i class="fa-solid fa-spinner fa-spin"></i>
          </span>
        </div>

        <div class="clock-styles" role="group" aria-label="Clock style selector">
          <button class="clock-style active" data-style="classic" title="Classic" aria-label="Classic style">
            <i class="fa-regular fa-clock"></i>
          </button>
          <button class="clock-style" data-style="modern" title="Modern" aria-label="Modern style">
            <i class="fa-solid fa-clock"></i>
          </button>
          <button class="clock-style" data-style="minimal" title="Minimal" aria-label="Minimal style">
            <i class="fa-regular fa-circle"></i>
          </button>
          <button class="clock-style" data-style="roman" title="Roman Numerals" aria-label="Roman numerals">
            <i class="fa-solid fa-landmark"></i>
          </button>
        </div>

        <div class="clock-controls">
          <button class="btn" id="toggleFormat" aria-label="Toggle 12/24 hour format">
            <i class="fa-solid fa-clock-rotate-left"></i> Toggle 12/24
          </button>
          <button class="btn btn-secondary" id="syncNow" aria-label="Sync time now">
            <i class="fa-solid fa-arrows-rotate"></i> Sync Now
          </button>
          <button class="btn btn-secondary" id="updateLocation" aria-label="Update location">
            <i class="fa-solid fa-location-crosshairs"></i> Update Location
          </button>
        </div>
      </div>

      <div class="card">
        <div class="tabs" role="tablist">
          <button class="tab active" data-tab="info" role="tab" aria-selected="true">Time Info</button>
          <button class="tab" data-tab="world" role="tab" aria-selected="false">World Clock</button>
          <button class="tab" data-tab="pomodoro" role="tab" aria-selected="false">Pomodoro</button>
          <button class="tab" data-tab="countdown" role="tab" aria-selected="false">Countdown</button>
          <button class="tab" data-tab="timezone" role="tab" aria-selected="false">Timezone</button>
          <button class="tab" data-tab="event" role="tab" aria-selected="false">Events</button>
          <button class="tab" data-tab="daycounter" role="tab" aria-selected="false">Day Counter</button>
          <button class="tab" data-tab="stopwatch" role="tab" aria-selected="false">Stopwatch</button>
          <button class="tab" data-tab="alarm" role="tab" aria-selected="false">Alarm</button>
        </div>

        <div class="tab-content active" id="info-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-info-circle"></i> Time Information</h3>
            <div class="info-grid">
              <div class="info-item"><div class="info-label">Timezone</div><div class="info-value" id="timezone">—</div></div>
              <div class="info-item"><div class="info-label">UTC Offset</div><div class="info-value" id="utcOffset">—</div></div>
              <div class="info-item"><div class="info-label">Day of Year</div><div class="info-value" id="dayOfYear">—</div></div>
              <div class="info-item"><div class="info-label">Week Number</div><div class="info-value" id="weekNumber">—</div></div>
            </div>
          </div>

          <div class="info-card">
            <h3><i class="fa-solid fa-location-dot"></i> Location Information</h3>
            <div class="info-grid">
              <div class="info-item"><div class="info-label">Latitude</div><div class="info-value" id="latitude">—</div></div>
              <div class="info-item"><div class="info-label">Longitude</div><div class="info-value" id="longitude">—</div></div>
              <div class="info-item"><div class="info-label">Country</div><div class="info-value" id="country">—</div></div>
              <div class="info-item"><div class="info-label">Region</div><div class="info-value" id="region">—</div></div>
            </div>
          </div>

          <div class="info-card">
            <h3><i class="fa-solid fa-chart-simple"></i> Day Progress</h3>
            <div class="info-item">
              <div class="info-label">Day Completed</div>
              <div class="info-value" id="dayProgress">0%</div>
              <div class="progress-container">
                <div class="progress-bar" id="dayProgressBar"></div>
              </div>
            </div>
          </div>

          <div class="info-card">
            <h3><i class="fa-solid fa-sun"></i> Sun Info</h3>
            <div class="info-grid">
              <div class="info-item"><div class="info-label">Sunrise</div><div class="info-value" id="sunrise">—</div></div>
              <div class="info-item"><div class="info-label">Sunset</div><div class="info-value" id="sunset">—</div></div>
            </div>
          </div>

          <div class="info-card">
            <h3><i class="fa-solid fa-palette"></i> Theme Settings</h3>
            <div class="auto-theme-container">
              <span>Auto Theme Switching</span>
              <div class="toggle-switch" id="autoThemeToggle">
                <div class="toggle-slider"></div>
              </div>
            </div>
            <div class="info-item">
              <div class="info-label">Current Time</div>
              <div class="info-value" id="currentTimeForTheme">—</div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="world-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-earth-americas"></i> World Clock</h3>
            <div class="world-clock" id="worldClockContainer">
              <div class="world-clock-item"><span>New York</span><span id="ny-time">—</span></div>
              <div class="world-clock-item"><span>London</span><span id="london-time">—</span></div>
              <div class="world-clock-item"><span>Tokyo</span><span id="tokyo-time">—</span></div>
              <div class="world-clock-item"><span>Sydney</span><span id="sydney-time">—</span></div>
            </div>
          </div>
        </div>

        <div class="tab-content" id="pomodoro-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-hourglass-half"></i> Pomodoro Timer</h3>
            <div class="pomodoro-container" style="flex-direction: column; align-items: center; gap: 16px;">
              <div class="pomodoro-status" id="pomodoroStatus">Ready to focus</div>
              <div class="pomodoro-timer" id="pomodoroTimer">25:00</div>
              <div class="pomodoro-controls">
                <button class="btn" id="pomodoroStart" aria-label="Start/Pause Pomodoro">
                  <i class="fa-solid fa-play"></i> Start
                </button>
                <button class="btn btn-secondary" id="pomodoroReset" aria-label="Reset Pomodoro">
                  <i class="fa-solid fa-arrows-rotate"></i> Reset
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Countdown Timer Tab -->
        <div class="tab-content" id="countdown-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-hourglass-end"></i> Countdown Timer</h3>
            <div class="countdown-container">
              <div class="countdown-display" id="countdownDisplay">00:00:00</div>
              <div class="countdown-controls">
                <div class="input-group">
                  <label for="countdownHours">Hours</label>
                  <input type="number" id="countdownHours" min="0" max="23" value="0">
                </div>
                <div class="input-group">
                  <label for="countdownMinutes">Minutes</label>
                  <input type="number" id="countdownMinutes" min="0" max="59" value="5">
                </div>
                <div class="input-group">
                  <label for="countdownSeconds">Seconds</label>
                  <input type="number" id="countdownSeconds" min="0" max="59" value="0">
                </div>
                <div class="countdown-controls">
                  <button class="btn" id="countdownStart">
                    <i class="fa-solid fa-play"></i> Start
                  </button>
                  <button class="btn btn-secondary" id="countdownPause">
                    <i class="fa-solid fa-pause"></i> Pause
                  </button>
                  <button class="btn btn-secondary" id="countdownReset">
                    <i class="fa-solid fa-arrows-rotate"></i> Reset
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Timezone Converter Tab -->
        <div class="tab-content" id="timezone-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-globe"></i> Timezone Converter</h3>
            <div class="timezone-container">
              <div class="input-group">
                <label for="fromTime">From Time</label>
                <input type="time" id="fromTime" value="12:00">
              </div>
              <div class="input-group">
                <label for="fromTimezone">From Timezone</label>
                <select id="fromTimezone">
                  <option value="UTC">UTC</option>
                  <option value="America/New_York">New York (EST)</option>
                  <option value="America/Los_Angeles">Los Angeles (PST)</option>
                  <option value="Europe/London">London (GMT)</option>
                  <option value="Europe/Paris">Paris (CET)</option>
                  <option value="Asia/Tokyo">Tokyo (JST)</option>
                  <option value="Asia/Shanghai">Shanghai (CST)</option>
                  <option value="Australia/Sydney">Sydney (AEST)</option>
                </select>
              </div>
              <div class="input-group">
                <label for="toTimezone">To Timezone</label>
                <select id="toTimezone">
                  <option value="UTC">UTC</option>
                  <option value="America/New_York" selected>New York (EST)</option>
                  <option value="America/Los_Angeles">Los Angeles (PST)</option>
                  <option value="Europe/London">London (GMT)</option>
                  <option value="Europe/Paris">Paris (CET)</option>
                  <option value="Asia/Tokyo">Tokyo (JST)</option>
                  <option value="Asia/Shanghai">Shanghai (CST)</option>
                  <option value="Australia/Sydney">Sydney (AEST)</option>
                </select>
              </div>
              <button class="btn" id="convertTimezone">
                <i class="fa-solid fa-arrows-rotate"></i> Convert
              </button>
              <div class="timezone-result" id="timezoneResult" style="display: none;">
                <div class="timezone-result-time" id="timezoneResultTime">—</div>
                <div class="timezone-result-info" id="timezoneResultInfo">—</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Event Countdown Tab -->
        <div class="tab-content" id="event-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-calendar-check"></i> Event Countdown</h3>
            <div class="event-container">
              <div class="event-display" id="eventDisplay">No events</div>
              <div class="event-controls">
                <div class="input-group">
                  <label for="eventName">Event Name</label>
                  <input type="text" id="eventName" placeholder="Enter event name">
                </div>
                <div class="input-group">
                  <label for="eventDate">Event Date & Time</label>
                  <input type="datetime-local" id="eventDate">
                </div>
                <button class="btn" id="addEvent">
                  <i class="fa-solid fa-plus"></i> Add Event
                </button>
              </div>
              <div class="event-list" id="eventList"></div>
            </div>
          </div>
        </div>

        <!-- Day Counter Tab -->
        <div class="tab-content" id="daycounter-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-calendar-days"></i> Day Counter</h3>
            <div class="day-counter-container">
              <div class="day-counter-display" id="dayCounterDisplay">0 days</div>
              <div class="day-counter-controls">
                <div class="input-group">
                  <label for="counterStartDate">Start Date</label>
                  <input type="date" id="counterStartDate">
                </div>
                <div class="input-group">
                  <label for="counterEndDate">End Date (optional)</label>
                  <input type="date" id="counterEndDate">
                </div>
                <button class="btn" id="updateDayCounter">
                  <i class="fa-solid fa-calculator"></i> Calculate
                </button>
              </div>
              <div class="info-item">
                <div class="info-label">Result</div>
                <div class="info-value" id="dayCounterResult">Select dates to calculate</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Stopwatch Tab -->
        <div class="tab-content" id="stopwatch-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-stopwatch"></i> Stopwatch</h3>
            <div class="stopwatch-container">
              <div class="stopwatch-display" id="stopwatchDisplay">00:00:00</div>
              <div class="stopwatch-controls">
                <button class="btn" id="stopwatchStart">
                  <i class="fa-solid fa-play"></i> Start
                </button>
                <button class="btn btn-secondary" id="stopwatchPause">
                  <i class="fa-solid fa-pause"></i> Pause
                </button>
                <button class="btn btn-secondary" id="stopwatchReset">
                  <i class="fa-solid fa-arrows-rotate"></i> Reset
                </button>
                <button class="btn btn-secondary" id="stopwatchLap">
                  <i class="fa-solid fa-flag"></i> Lap
                </button>
              </div>
              <div class="lap-list" id="lapList"></div>
            </div>
          </div>
        </div>

        <!-- Alarm Tab -->
        <div class="tab-content" id="alarm-tab">
          <div class="info-card">
            <h3><i class="fa-solid fa-bell"></i> Alarm</h3>
            <div class="alarm-container">
              <div class="alarm-controls">
                <div class="input-group">
                  <label for="alarmTime">Alarm Time</label>
                  <input type="time" id="alarmTime">
                </div>
                <div class="input-group">
                  <label for="alarmLabel">Alarm Label</label>
                  <input type="text" id="alarmLabel" placeholder="Enter alarm label">
                </div>
                <button class="btn" id="addAlarm">
                  <i class="fa-solid fa-plus"></i> Add Alarm
                </button>
              </div>
              <div class="alarm-list" id="alarmList"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p>Jam &copy; 2025 | A modern clock application with multiple features</p>
    </footer>
  </div>

  <script>
    class ClockApp {
      constructor() {
        this.elements = {
          hourHand: document.getElementById('hourHand'),
          minuteHand: document.getElementById('minuteHand'),
          secondHand: document.getElementById('secondHand'),
          digitalTime: document.getElementById('digitalTime'),
          dateDisplay: document.getElementById('dateDisplay'),
          locationDisplay: document.getElementById('locationDisplay'),
          locationText: document.getElementById('locationText'),
          locationStatus: document.getElementById('locationStatus'),
          timezone: document.getElementById('timezone'),
          utcOffset: document.getElementById('utcOffset'),
          dayOfYear: document.getElementById('dayOfYear'),
          weekNumber: document.getElementById('weekNumber'),
          dayProgress: document.getElementById('dayProgress'),
          dayProgressBar: document.getElementById('dayProgressBar'),
          sunrise: document.getElementById('sunrise'),
          sunset: document.getElementById('sunset'),
          pomodoroTimer: document.getElementById('pomodoroTimer'),
          pomodoroStatus: document.getElementById('pomodoroStatus'),
          soundToggle: document.getElementById('soundToggle'),
          fullscreenBtn: document.getElementById('fullscreenBtn'),
          autoThemeToggle: document.getElementById('autoThemeToggle'),
          currentTimeForTheme: document.getElementById('currentTimeForTheme'),
          // Location elements
          latitude: document.getElementById('latitude'),
          longitude: document.getElementById('longitude'),
          country: document.getElementById('country'),
          region: document.getElementById('region'),
          // Day Counter elements
          dayCounterDisplay: document.getElementById('dayCounterDisplay'),
          dayCounterResult: document.getElementById('dayCounterResult'),
          counterStartDate: document.getElementById('counterStartDate'),
          counterEndDate: document.getElementById('counterEndDate'),
          // Stopwatch elements
          stopwatchDisplay: document.getElementById('stopwatchDisplay'),
          lapList: document.getElementById('lapList'),
          // Alarm elements
          alarmTime: document.getElementById('alarmTime'),
          alarmLabel: document.getElementById('alarmLabel'),
          alarmList: document.getElementById('alarmList'),
          // Countdown elements
          countdownDisplay: document.getElementById('countdownDisplay'),
          countdownHours: document.getElementById('countdownHours'),
          countdownMinutes: document.getElementById('countdownMinutes'),
          countdownSeconds: document.getElementById('countdownSeconds'),
          // Timezone converter elements
          fromTime: document.getElementById('fromTime'),
          fromTimezone: document.getElementById('fromTimezone'),
          toTimezone: document.getElementById('toTimezone'),
          timezoneResult: document.getElementById('timezoneResult'),
          timezoneResultTime: document.getElementById('timezoneResultTime'),
          timezoneResultInfo: document.getElementById('timezoneResultInfo'),
          // Event elements
          eventDisplay: document.getElementById('eventDisplay'),
          eventName: document.getElementById('eventName'),
          eventDate: document.getElementById('eventDate'),
          eventList: document.getElementById('eventList')
        };

        this.use24Hour = true;
        this.soundEnabled = true;
        this.clockStyle = 'classic';
        this.pomodoroTime = 25 * 60;
        this.pomodoroRunning = false;
        this.pomodoroInterval = null;
        this.audioContext = null;
        this.autoThemeEnabled = false;
        this.isFullscreen = false;
        
        // Location properties
        this.userLocation = {
          latitude: null,
          longitude: null,
          city: null,
          region: null,
          country: null,
          timezone: null,
          timezoneOffset: null
        };
        
        // Day Counter properties
        this.dayCounterStartDate = null;
        this.dayCounterEndDate = null;
        
        // Stopwatch properties
        this.stopwatchTime = 0;
        this.stopwatchRunning = false;
        this.stopwatchInterval = null;
        this.lapTimes = [];
        
        // Alarm properties
        this.alarms = [];
        this.alarmInterval = null;
        
        // Countdown properties
        this.countdownTime = 0;
        this.countdownRunning = false;
        this.countdownInterval = null;
        
        // Event properties
        this.events = [];
        this.eventInterval = null;

        this.init();
      }

      init() {
        this.setupEventListeners();
        this.updateClock();
        this.startClock();
        this.updateWorldClocks();
        setInterval(() => this.updateWorldClocks(), 1000);
        this.requestNotificationPermission();
        
        // Initialize day counter with today's date
        const today = new Date();
        this.elements.counterStartDate.value = today.toISOString().split('T')[0];
        
        // Start alarm checker
        this.startAlarmChecker();
        
        // Start event checker
        this.startEventChecker();
        
        // Get user location
        this.getUserLocation();
        
        // Setup auto theme switching
        this.setupAutoTheme();
      }

      setupEventListeners() {
        // Theme
        document.querySelectorAll('.theme-btn').forEach(btn => {
          btn.addEventListener('click', () => {
            const theme = btn.dataset.theme;
            document.documentElement.setAttribute('data-theme', theme);
            document.querySelectorAll('.theme-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            this.playSound('click');
          });
        });

        // Clock style
        document.querySelectorAll('.clock-style').forEach(btn => {
          btn.addEventListener('click', () => {
            const style = btn.dataset.style;
            this.setClockStyle(style);
            document.querySelectorAll('.clock-style').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
          });
        });

        // Format toggle
        document.getElementById('toggleFormat').addEventListener('click', () => {
          this.use24Hour = !this.use24Hour;
          this.updateClock();
        });

        // Sync
        document.getElementById('syncNow').addEventListener('click', () => {
          this.updateClock();
          this.playSound('sync');
        });
        
        // Update location
        document.getElementById('updateLocation').addEventListener('click', () => {
          this.getUserLocation();
        });

        // Sound toggle
        this.elements.soundToggle.addEventListener('click', () => {
          this.soundEnabled = !this.soundEnabled;
          const icon = this.elements.soundToggle.querySelector('i');
          if (this.soundEnabled) {
            icon.className = 'fa-solid fa-volume-high';
            this.elements.soundToggle.classList.add('active');
          } else {
            icon.className = 'fa-solid fa-volume-xmark';
            this.elements.soundToggle.classList.remove('active');
          }
        });
        
        // Fullscreen toggle
        this.elements.fullscreenBtn.addEventListener('click', () => {
          this.toggleFullscreen();
        });
        
        // Auto theme toggle
        this.elements.autoThemeToggle.addEventListener('click', () => {
          this.toggleAutoTheme();
        });

        // Tabs
        document.querySelectorAll('.tab').forEach(tab => {
          tab.addEventListener('click', () => {
            const target = tab.dataset.tab;
            document.querySelectorAll('.tab').forEach(t => {
              t.classList.toggle('active', t === tab);
              t.setAttribute('aria-selected', t === tab);
            });
            document.querySelectorAll('.tab-content').forEach(c => {
              c.classList.toggle('active', c.id === `${target}-tab`);
            });
          });
        });

        // Pomodoro
        document.getElementById('pomodoroStart').addEventListener('click', () => {
          this.pomodoroRunning ? this.pausePomodoro() : this.startPomodoro();
        });
        document.getElementById('pomodoroReset').addEventListener('click', () => {
          this.resetPomodoro();
        });
        
        // Countdown
        document.getElementById('countdownStart').addEventListener('click', () => {
          this.startCountdown();
        });
        document.getElementById('countdownPause').addEventListener('click', () => {
          this.pauseCountdown();
        });
        document.getElementById('countdownReset').addEventListener('click', () => {
          this.resetCountdown();
        });
        
        // Timezone converter
        document.getElementById('convertTimezone').addEventListener('click', () => {
          this.convertTimezone();
        });
        
        // Event countdown
        document.getElementById('addEvent').addEventListener('click', () => {
          this.addEvent();
        });
        
        // Day Counter
        document.getElementById('updateDayCounter').addEventListener('click', () => {
          this.updateDayCounter();
        });
        
        // Stopwatch
        document.getElementById('stopwatchStart').addEventListener('click', () => {
          this.startStopwatch();
        });
        document.getElementById('stopwatchPause').addEventListener('click', () => {
          this.pauseStopwatch();
        });
        document.getElementById('stopwatchReset').addEventListener('click', () => {
          this.resetStopwatch();
        });
        document.getElementById('stopwatchLap').addEventListener('click', () => {
          this.recordLap();
        });
        
        // Alarm
        document.getElementById('addAlarm').addEventListener('click', () => {
          this.addAlarm();
        });

        // Init audio on first interaction
        document.body.addEventListener('click', () => {
          if (!this.audioContext) {
            this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
          }
        }, { once: true });
        
        // Handle fullscreen change
        document.addEventListener('fullscreenchange', () => {
          this.isFullscreen = !!document.fullscreenElement;
          const icon = this.elements.fullscreenBtn.querySelector('i');
          if (this.isFullscreen) {
            icon.className = 'fa-solid fa-compress';
          } else {
            icon.className = 'fa-solid fa-expand';
          }
        });
      }

      setClockStyle(style) {
        this.clockStyle = style;
        const clock = document.getElementById('analogClock');
        clock.className = `clock ${style}`;

        const numbers = document.querySelectorAll('.clock-number');
        const roman = ['XII','I','II','III','IV','V','VI','VII','VIII','IX','X','XI'];

        numbers.forEach((el, i) => {
          if (style === 'minimal') {
            el.style.display = 'none';
          } else {
            el.style.display = 'block';
            el.textContent = style === 'roman' ? roman[i] : [12,1,2,3,4,5,6,7,8,9,10,11][i];
          }
        });

        this.playSound('click');
      }

      updateClock() {
        // Get current time based on user's location timezone
        let now;
        if (this.userLocation.timezone) {
          // Create date string in the user's timezone
          const nowUTC = new Date();
          const localTime = new Date(nowUTC.toLocaleString("en-US", {timeZone: this.userLocation.timezone}));
          now = localTime;
        } else {
          // Fallback to local time
          now = new Date();
        }

        // Hands
        const sec = now.getSeconds() + now.getMilliseconds() / 1000;
        const min = now.getMinutes() + sec / 60;
        const hr = (now.getHours() % 12) + min / 60;

        this.elements.secondHand.style.transform = `rotate(${sec * 6}deg)`;
        this.elements.minuteHand.style.transform = `rotate(${min * 6}deg)`;
        this.elements.hourHand.style.transform = `rotate(${hr * 30}deg)`;

        // Digital time
        let h = now.getHours();
        const m = String(now.getMinutes()).padStart(2, '0');
        const s = String(now.getSeconds()).padStart(2, '0');
        let period = '';
        if (!this.use24Hour) {
          period = h >= 12 ? ' PM' : ' AM';
          h = h % 12 || 12;
        }
        this.elements.digitalTime.textContent = `${String(h).padStart(2, '0')}:${m}:${s}${period}`;

        // Date
        this.elements.dateDisplay.textContent = now.toLocaleDateString(undefined, {
          weekday: 'long',
          year: 'numeric',
          month: 'long',
          day: 'numeric',
          timeZone: this.userLocation.timezone || undefined
        });

        // Timezone
        if (this.userLocation.timezone) {
          this.elements.timezone.textContent = this.userLocation.timezone;
        } else {
          this.elements.timezone.textContent = Intl.DateTimeFormat().resolvedOptions().timeZone;
        }

        // UTC offset
        let offset;
        if (this.userLocation.timezoneOffset !== null) {
          offset = this.userLocation.timezoneOffset;
        } else {
          offset = -now.getTimezoneOffset();
        }
        
        const sign = offset >= 0 ? '+' : '-';
        const abs = Math.abs(offset);
        const utcH = String(Math.floor(abs / 60)).padStart(2, '0');
        const utcM = String(abs % 60).padStart(2, '0');
        this.elements.utcOffset.textContent = `UTC${sign}${utcH}:${utcM}`;

        // Day of year
        const start = new Date(now.getFullYear(), 0, 0);
        const diff = (now - start) / 86400000;
        this.elements.dayOfYear.textContent = Math.floor(diff);

        // Week number
        const jan1 = new Date(now.getFullYear(), 0, 1);
        const days = Math.floor((now - jan1) / 86400000);
        const week = Math.ceil((days + jan1.getDay() + 1) / 7);
        this.elements.weekNumber.textContent = week;

        // Day progress
        const totalSec = 86400;
        const passed = now.getHours() * 3600 + now.getMinutes() * 60 + now.getSeconds();
        const percent = (passed / totalSec) * 100;
        this.elements.dayProgress.textContent = `${percent.toFixed(2)}%`;
        this.elements.dayProgressBar.style.width = `${percent}%`;

        // Sun info (more accurate based on location)
        this.calculateSunTimes(now);
        
        // Update current time for auto theme
        this.elements.currentTimeForTheme.textContent = now.toLocaleTimeString();
      }

      calculateSunTimes(date) {
        if (!this.userLocation.latitude || !this.userLocation.longitude) {
          // Fallback to approximate calculation
          const doy = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 86400000);
          const sunriseH = 6 + Math.sin((doy - 80) * Math.PI / 182) * 1.5;
          const sunsetH = 18 + Math.sin((doy - 80) * Math.PI / 182) * 1.5;
          this.elements.sunrise.textContent = `${Math.floor(sunriseH)}:${String(Math.round((sunriseH % 1) * 60)).padStart(2, '0')}`;
          this.elements.sunset.textContent = `${Math.floor(sunsetH)}:${String(Math.round((sunsetH % 1) * 60)).padStart(2, '0')}`;
          return;
        }

        // More accurate sun calculation based on latitude
        const lat = this.userLocation.latitude * Math.PI / 180;
        const doy = Math.floor((date - new Date(date.getFullYear(), 0, 0)) / 86400000);
        
        // Solar declination
        const declination = -23.45 * Math.cos((360 * (284 + doy) / 365) * Math.PI / 180) * Math.PI / 180;
        
        // Hour angle
        const hourAngle = Math.acos(-Math.tan(lat) * Math.tan(declination));
        
        // Sunrise and sunset in hours from midnight
        const sunrise = 12 - hourAngle * 12 / Math.PI;
        const sunset = 12 + hourAngle * 12 / Math.PI;
        
        // Format times
        this.elements.sunrise.textContent = `${Math.floor(sunrise)}:${String(Math.round((sunriseH % 1) * 60)).padStart(2, '0')}`;
        this.elements.sunset.textContent = `${Math.floor(sunset)}:${String(Math.round((sunsetH % 1) * 60)).padStart(2, '0')}`;
      }

      startClock() {
        setInterval(() => {
          this.updateClock();
          if (this.soundEnabled) this.playSound('tick');
        }, 1000);
      }

      updateWorldClocks() {
        const now = new Date();
        const cities = {
          'ny-time': { timezone: 'America/New_York', name: 'New York' },
          'london-time': { timezone: 'Europe/London', name: 'London' },
          'tokyo-time': { timezone: 'Asia/Tokyo', name: 'Tokyo' },
          'sydney-time': { timezone: 'Australia/Sydney', name: 'Sydney' }
        };
        
        Object.entries(cities).forEach(([id, city]) => {
          const time = new Date(now.toLocaleString("en-US", {timeZone: city.timezone}));
          const hours = String(time.getHours()).padStart(2, '0');
          const minutes = String(time.getMinutes()).padStart(2, '0');
          document.getElementById(id).textContent = `${hours}:${minutes}`;
        });
      }

      // Location methods
      getUserLocation() {
        // Update status to loading
        this.updateLocationStatus('loading', '<i class="fa-solid fa-spinner fa-spin"></i>');
        
        if (!navigator.geolocation) {
          this.updateLocationStatus('error', '<i class="fa-solid fa-exclamation-circle"></i>');
          this.elements.locationText.textContent = 'Geolocation not supported';
          return;
        }

        navigator.geolocation.getCurrentPosition(
          (position) => {
            this.userLocation.latitude = position.coords.latitude;
            this.userLocation.longitude = position.coords.longitude;
            
            // Update UI with coordinates
            this.elements.latitude.textContent = this.userLocation.latitude.toFixed(6);
            this.elements.longitude.textContent = this.userLocation.longitude.toFixed(6);
            
            // Get timezone and location name
            this.getTimezoneFromCoordinates(this.userLocation.latitude, this.userLocation.longitude);
          },
          (error) => {
            this.updateLocationStatus('error', '<i class="fa-solid fa-exclamation-circle"></i>');
            this.elements.locationText.textContent = 'Location access denied';
            console.error('Error getting location:', error);
          },
          {
            enableHighAccuracy: true,
            timeout: 10000,
            maximumAge: 300000 // 5 minutes
          }
        );
      }

      getTimezoneFromCoordinates(lat, lon) {
        // Using timezone API based on coordinates
        // Using a free timezone API (you might want to replace with your preferred service)
        fetch(`https://api.timezonedb.com/v2.1/get-time-zone?key=YOUR_API_KEY&format=json&by=position&lat=${lat}&lng=${lon}`)
          .then(response => response.json())
          .then(data => {
            if (data.status === 'OK') {
              this.userLocation.timezone = data.zoneName;
              this.userLocation.timezoneOffset = parseInt(data.gmtOffset) / 60;
              
              // Update timezone display
              this.elements.timezone.textContent = this.userLocation.timezone;
              
              // Get location name
              this.getLocationName(lat, lon);
            } else {
              throw new Error('Failed to get timezone');
            }
          })
          .catch(error => {
            console.error('Error getting timezone:', error);
            // Fallback to browser timezone
            this.userLocation.timezone = Intl.DateTimeFormat().resolvedOptions().timeZone;
            this.getLocationName(lat, lon);
          });
      }

      getLocationName(lat, lon) {
        // Using Nominatim OpenStreetMap API for reverse geocoding
        fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=10`)
          .then(response => response.json())
          .then(data => {
            if (data && data.address) {
              const address = data.address;
              this.userLocation.city = address.city || address.town || address.village || 'Not Mentioned';
              this.userLocation.region = address.state || address.region || 'Unknown';
              this.userLocation.country = address.country || 'Unknown';
              
              // Update UI with location name
              this.elements.locationText.textContent = 
                `${this.userLocation.city}, ${this.userLocation.region}, ${this.userLocation.country}`;
              
              this.elements.country.textContent = this.userLocation.country;
              this.elements.region.textContent = this.userLocation.region;
              
              // Update status to success
              this.updateLocationStatus('success', '<i class="fa-solid fa-check-circle"></i>');
              
              // Update clock with new timezone
              this.updateClock();
            } else {
              throw new Error('No address data found');
            }
          })
          .catch(error => {
            console.error('Error getting location name:', error);
            // Fallback to coordinates only
            this.elements.locationText.textContent = `${lat.toFixed(4)}, ${lon.toFixed(4)}`;
            this.updateLocationStatus('success', '<i class="fa-solid fa-check-circle"></i>');
          });
      }

      updateLocationStatus(status, icon) {
        this.elements.locationStatus.className = `location-status ${status}`;
        this.elements.locationStatus.innerHTML = icon;
      }

      // Pomodoro methods
      startPomodoro() {
        this.pomodoroRunning = true;
        document.getElementById('pomodoroStart').innerHTML = '<i class="fa-solid fa-pause"></i> Pause';
        this.elements.pomodoroStatus.textContent = 'Focus time!';
        this.pomodoroInterval = setInterval(() => {
          if (this.pomodoroTime > 0) {
            this.pomodoroTime--;
            this.updatePomodoroDisplay();
          } else {
            this.completePomodoro();
          }
        }, 1000);
        this.playSound('start');
      }

      pausePomodoro() {
        this.pomodoroRunning = false;
        clearInterval(this.pomodoroInterval);
        document.getElementById('pomodoroStart').innerHTML = '<i class="fa-solid fa-play"></i> Start';
        this.elements.pomodoroStatus.textContent = 'Paused';
        this.playSound('pause');
      }

      resetPomodoro() {
        this.pausePomodoro();
        this.pomodoroTime = 25 * 60;
        this.updatePomodoroDisplay();
        this.elements.pomodoroStatus.textContent = 'Ready to focus';
        this.playSound('reset');
      }

      completePomodoro() {
        this.pausePomodoro();
        this.elements.pomodoroStatus.textContent = 'Time for a break!';
        this.playSound('alarm');
        if (Notification.permission === 'granted') {
          new Notification('Pomodoro Complete!', { body: 'Great job! Take a short break.' });
        }
      }

      updatePomodoroDisplay() {
        const m = Math.floor(this.pomodoroTime / 60);
        const s = this.pomodoroTime % 60;
        this.elements.pomodoroTimer.textContent = `${String(m).padStart(2, '0')}:${String(s).padStart(2, '0')}`;
      }

      // Countdown Timer methods
      startCountdown() {
        if (!this.countdownRunning) {
          // Get time from inputs
          const hours = parseInt(this.elements.countdownHours.value) || 0;
          const minutes = parseInt(this.elements.countdownMinutes.value) || 0;
          const seconds = parseInt(this.elements.countdownSeconds.value) || 0;
          
          // If countdown is at 0, set it to the input values
          if (this.countdownTime === 0) {
            this.countdownTime = hours * 3600 + minutes * 60 + seconds;
          }
          
          if (this.countdownTime > 0) {
            this.countdownRunning = true;
            this.countdownInterval = setInterval(() => {
              if (this.countdownTime > 0) {
                this.countdownTime--;
                this.updateCountdownDisplay();
              } else {
                this.completeCountdown();
              }
            }, 1000);
            this.playSound('start');
          }
        }
      }

      pauseCountdown() {
        if (this.countdownRunning) {
          this.countdownRunning = false;
          clearInterval(this.countdownInterval);
          this.playSound('pause');
        }
      }

      resetCountdown() {
        this.pauseCountdown();
        this.countdownTime = 0;
        this.updateCountdownDisplay();
        this.playSound('reset');
      }

      completeCountdown() {
        this.pauseCountdown();
        this.playSound('alarm');
        if (Notification.permission === 'granted') {
          new Notification('Countdown Complete!', { body: 'Your countdown timer has finished.' });
        }
      }

      updateCountdownDisplay() {
        const hours = Math.floor(this.countdownTime / 3600);
        const minutes = Math.floor((this.countdownTime % 3600) / 60);
        const seconds = this.countdownTime % 60;
        
        this.elements.countdownDisplay.textContent = 
          `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      }

      // Timezone Converter methods
      convertTimezone() {
        const fromTime = this.elements.fromTime.value;
        const fromTimezone = this.elements.fromTimezone.value;
        const toTimezone = this.elements.toTimezone.value;
        
        if (!fromTime) {
          return;
        }
        
        // Create a date object with today's date and the selected time
        const today = new Date();
        const [hours, minutes] = fromTime.split(':').map(Number);
        
        // Create date in the source timezone
        const sourceDate = new Date(today.getFullYear(), today.getMonth(), today.getDate(), hours, minutes);
        
        // Format the date in the source timezone to get the correct UTC time
        const sourceTimeUTC = new Date(sourceDate.toLocaleString("en-US", {timeZone: fromTimezone}));
        
        // Convert UTC time to the target timezone
        const targetTime = new Date(sourceTimeUTC.toLocaleString("en-US", {timeZone: toTimezone}));
        
        // Format the result
        const targetHours = String(targetTime.getHours()).padStart(2, '0');
        const targetMinutes = String(targetTime.getMinutes()).padStart(2, '0');
        
        // Display the result
        this.elements.timezoneResultTime.textContent = `${targetHours}:${targetMinutes}`;
        this.elements.timezoneResultInfo.textContent = `${fromTime} in ${fromTimezone} is ${targetHours}:${targetMinutes} in ${toTimezone}`;
        this.elements.timezoneResult.style.display = 'block';
        
        this.playSound('click');
      }

      // Event Countdown methods
      addEvent() {
        const name = this.elements.eventName.value;
        const date = this.elements.eventDate.value;
        
        if (!name || !date) {
          return;
        }
        
        const event = {
          id: Date.now(),
          name: name,
          date: new Date(date)
        };
        
        this.events.push(event);
        this.renderEvents();
        
        // Clear inputs
        this.elements.eventName.value = '';
        this.elements.eventDate.value = '';
        
        // Update display to show the next event
        this.updateEventDisplay();
        
        this.playSound('click');
      }

      deleteEvent(id) {
        this.events = this.events.filter(event => event.id !== id);
        this.renderEvents();
        this.updateEventDisplay();
        this.playSound('click');
      }

      renderEvents() {
        this.elements.eventList.innerHTML = '';
        
        if (this.events.length === 0) {
          const emptyMessage = document.createElement('div');
          emptyMessage.className = 'info-item';
          emptyMessage.textContent = 'No events added';
          this.elements.eventList.appendChild(emptyMessage);
          return;
        }
        
        // Sort events by date (closest first)
        const sortedEvents = [...this.events].sort((a, b) => new Date(a.date) - new Date(b.date));
        
        sortedEvents.forEach(event => {
          const eventItem = document.createElement('div');
          eventItem.className = 'event-item';
          
          // Calculate time remaining
          const now = new Date();
          const eventDate = new Date(event.date);
          const diff = eventDate - now;
          
          let timeRemaining = '';
          if (diff > 0) {
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            if (days > 0) {
              timeRemaining = `${days}d ${hours}h ${minutes}m`;
            } else if (hours > 0) {
              timeRemaining = `${hours}h ${minutes}m`;
            } else {
              timeRemaining = `${minutes}m ${Math.floor((diff % (1000 * 60)) / 1000)}s`;
            }
          } else {
            timeRemaining = 'Event passed';
          }
          
          eventItem.innerHTML = `
            <div>
              <div class="event-name">${event.name}</div>
              <div class="event-date">${eventDate.toLocaleDateString()} ${eventDate.toLocaleTimeString()}</div>
            </div>
            <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 5px;">
              <div style="font-weight: 600;">${timeRemaining}</div>
              <button class="btn btn-secondary" style="padding: 6px 10px; font-size: 12px;" data-id="${event.id}" data-action="delete">
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>
          `;
          
          // Add event listener
          eventItem.querySelector('[data-action="delete"]').addEventListener('click', () => {
            this.deleteEvent(event.id);
          });
          
          this.elements.eventList.appendChild(eventItem);
        });
      }

      updateEventDisplay() {
        if (this.events.length === 0) {
          this.elements.eventDisplay.textContent = 'No events';
          return;
        }
        
        // Find the next upcoming event
        const now = new Date();
        const upcomingEvents = this.events.filter(event => new Date(event.date) > now);
        
        if (upcomingEvents.length === 0) {
          this.elements.eventDisplay.textContent = 'No upcoming events';
          return;
        }
        
        // Sort by date and get the closest one
        upcomingEvents.sort((a, b) => new Date(a.date) - new Date(b.date));
        const nextEvent = upcomingEvents[0];
        
        // Calculate time remaining
        const eventDate = new Date(nextEvent.date);
        const diff = eventDate - now;
        
        const days = Math.floor(diff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        
        let displayText = '';
        if (days > 0) {
          displayText = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        } else if (hours > 0) {
          displayText = `${hours}h ${minutes}m ${seconds}s`;
        } else if (minutes > 0) {
          displayText = `${minutes}m ${seconds}s`;
        } else {
          displayText = `${seconds}s`;
        }
        
        this.elements.eventDisplay.textContent = `${nextEvent.name}: ${displayText}`;
      }

      startEventChecker() {
        this.eventInterval = setInterval(() => {
          this.updateEventDisplay();
        }, 1000);
      }

      // Day Counter methods
      updateDayCounter() {
        const startDate = new Date(this.elements.counterStartDate.value);
        const endDate = this.elements.counterEndDate.value ? new Date(this.elements.counterEndDate.value) : new Date();
        
        if (isNaN(startDate.getTime())) {
          this.elements.dayCounterResult.textContent = 'Please select a valid start date';
          return;
        }
        
        const diffTime = Math.abs(endDate - startDate);
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        
        this.elements.dayCounterDisplay.textContent = `${diffDays} days`;
        this.elements.dayCounterResult.textContent = 
          `${diffDays} days between ${startDate.toLocaleDateString()} and ${endDate.toLocaleDateString()}`;
        
        this.playSound('click');
      }

      // Stopwatch methods
      startStopwatch() {
        if (!this.stopwatchRunning) {
          this.stopwatchRunning = true;
          this.stopwatchInterval = setInterval(() => {
            this.stopwatchTime += 10; // increment by 10ms
            this.updateStopwatchDisplay();
          }, 10);
          this.playSound('start');
        }
      }

      pauseStopwatch() {
        if (this.stopwatchRunning) {
          this.stopwatchRunning = false;
          clearInterval(this.stopwatchInterval);
          this.playSound('pause');
        }
      }

      resetStopwatch() {
        this.stopwatchRunning = false;
        clearInterval(this.stopwatchInterval);
        this.stopwatchTime = 0;
        this.lapTimes = [];
        this.updateStopwatchDisplay();
        this.elements.lapList.innerHTML = '';
        this.playSound('reset');
      }

      recordLap() {
        if (this.stopwatchRunning) {
          const lapTime = this.stopwatchTime;
          this.lapTimes.push(lapTime);
          
          const lapItem = document.createElement('div');
          lapItem.className = 'lap-item';
          lapItem.innerHTML = `
            <span>Lap ${this.lapTimes.length}</span>
            <span>${this.formatStopwatchTime(lapTime)}</span>
          `;
          
          this.elements.lapList.prepend(lapItem);
          this.playSound('click');
        }
      }

      updateStopwatchDisplay() {
        this.elements.stopwatchDisplay.textContent = this.formatStopwatchTime(this.stopwatchTime);
      }

      formatStopwatchTime(time) {
        const minutes = Math.floor(time / 60000);
        const seconds = Math.floor((time % 60000) / 1000);
        const milliseconds = Math.floor((time % 1000) / 10);
        
        return `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}.${String(milliseconds).padStart(2, '0')}`;
      }

      // Alarm methods
      addAlarm() {
        const time = this.elements.alarmTime.value;
        const label = this.elements.alarmLabel.value || 'Alarm';
        
        if (!time) {
          return;
        }
        
        const alarm = {
          id: Date.now(),
          time: time,
          label: label,
          active: true
        };
        
        this.alarms.push(alarm);
        this.renderAlarms();
        
        // Clear inputs
        this.elements.alarmTime.value = '';
        this.elements.alarmLabel.value = '';
        
        this.playSound('click');
      }

      deleteAlarm(id) {
        this.alarms = this.alarms.filter(alarm => alarm.id !== id);
        this.renderAlarms();
        this.playSound('click');
      }

      toggleAlarm(id) {
        const alarm = this.alarms.find(a => a.id === id);
        if (alarm) {
          alarm.active = !alarm.active;
          this.renderAlarms();
          this.playSound('click');
        }
      }

      renderAlarms() {
        this.elements.alarmList.innerHTML = '';
        
        if (this.alarms.length === 0) {
          const emptyMessage = document.createElement('div');
          emptyMessage.className = 'info-item';
          emptyMessage.textContent = 'No alarms set';
          this.elements.alarmList.appendChild(emptyMessage);
          return;
        }
        
        this.alarms.forEach(alarm => {
          const alarmItem = document.createElement('div');
          alarmItem.className = 'alarm-item';
          
          alarmItem.innerHTML = `
            <div>
              <div class="alarm-time">${alarm.time}</div>
              <div class="alarm-label">${alarm.label}</div>
            </div>
            <div style="display: flex; gap: 8px;">
              <button class="btn" style="padding: 6px 10px; font-size: 12px;" data-id="${alarm.id}" data-action="toggle">
                <i class="fa-solid ${alarm.active ? 'fa-toggle-on' : 'fa-toggle-off'}"></i>
              </button>
              <button class="btn btn-secondary" style="padding: 6px 10px; font-size: 12px;" data-id="${alarm.id}" data-action="delete">
                <i class="fa-solid fa-trash"></i>
              </button>
            </div>
          `;
          
          // Add event listeners
          alarmItem.querySelector('[data-action="toggle"]').addEventListener('click', () => {
            this.toggleAlarm(alarm.id);
          });
          
          alarmItem.querySelector('[data-action="delete"]').addEventListener('click', () => {
            this.deleteAlarm(alarm.id);
          });
          
          this.elements.alarmList.appendChild(alarmItem);
        });
      }

      startAlarmChecker() {
        this.alarmInterval = setInterval(() => {
          // Get current time in user's timezone
          let now;
          if (this.userLocation.timezone) {
            const nowUTC = new Date();
            now = new Date(nowUTC.toLocaleString("en-US", {timeZone: this.userLocation.timezone}));
          } else {
            now = new Date();
          }
          
          const currentTime = `${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
          
          this.alarms.forEach(alarm => {
            if (alarm.active && alarm.time === currentTime) {
              this.triggerAlarm(alarm);
              // Deactivate alarm after triggering
              alarm.active = false;
              this.renderAlarms();
            }
          });
        }, 1000);
      }

      triggerAlarm(alarm) {
        this.playSound('alarm');
        
        if (Notification.permission === 'granted') {
          new Notification('Alarm!', { 
            body: `${alarm.label} - ${alarm.time}`,
            icon: 'https://cdn-icons-png.flaticon.com/512/3471/3471705.png'
          });
        }
      }

      // Fullscreen methods
      toggleFullscreen() {
        if (!this.isFullscreen) {
          // Enter fullscreen
          if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
          } else if (document.documentElement.webkitRequestFullscreen) {
            document.documentElement.webkitRequestFullscreen();
          } else if (document.documentElement.msRequestFullscreen) {
            document.documentElement.msRequestFullscreen();
          }
        } else {
          // Exit fullscreen
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
        }
        this.playSound('click');
      }

      // Auto theme methods
      toggleAutoTheme() {
        this.autoThemeEnabled = !this.autoThemeEnabled;
        this.elements.autoThemeToggle.classList.toggle('active', this.autoThemeEnabled);
        
        if (this.autoThemeEnabled) {
          this.setupAutoTheme();
        }
        
        this.playSound('click');
      }

      setupAutoTheme() {
        if (!this.autoThemeEnabled) return;
        
        const now = new Date();
        const hour = now.getHours();
        
        // Set theme based on time of day
        let theme;
        if (hour >= 6 && hour < 12) {
          // Morning - Ocean theme
          theme = 'ocean';
        } else if (hour >= 12 && hour < 18) {
          // Afternoon - Forest theme
          theme = 'forest';
        } else if (hour >= 18 && hour < 21) {
          // Evening - Sunset theme
          theme = 'sunset';
        } else {
          // Night - Dark theme
          theme = 'dark';
        }
        
        document.documentElement.setAttribute('data-theme', theme);
        document.querySelectorAll('.theme-btn').forEach(btn => {
          btn.classList.toggle('active', btn.dataset.theme === theme);
        });
        
        // Check again in 10 minutes
        if (this.autoThemeEnabled) {
          setTimeout(() => this.setupAutoTheme(), 600000);
        }
      }

      // Sound
      playSound(type) {
        if (!this.soundEnabled || !this.audioContext) return;
        const ctx = this.audioContext;
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.connect(gain);
        gain.connect(ctx.destination);

        let freq = 1000, dur = 0.1, typeMap = {
          tick: { f: 1000, t: 'sine', v: 0.1 },
          click: { f: 1500, t: 'sine', v: 0.2 },
          start: { f: 800, t: 'triangle', v: 0.3 },
          pause: { f: 600, t: 'triangle', v: 0.3 },
          reset: { f: 400, t: 'sawtooth', v: 0.3 },
          alarm: { f: 880, t: 'square', v: 0.4 },
          sync: { f: 1200, t: 'sine', v: 0.3 }
        }[type] || { f: 1000, t: 'sine', v: 0.1 };

        osc.type = typeMap.t;
        osc.frequency.value = typeMap.f;
        gain.gain.value = typeMap.v;
        osc.start();
        setTimeout(() => osc.stop(), dur * 1000);
      }

      requestNotificationPermission() {
        if ('Notification' in window && Notification.permission === 'default') {
          Notification.requestPermission();
        }
      }
    }

    document.addEventListener('DOMContentLoaded', () => new ClockApp());
  </script>
</body>
</html>