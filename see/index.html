<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color Studio - Alat Warna Lengkap</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
        }
        
        .color-input::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        
        .color-input::-webkit-color-swatch {
            border: none;
            border-radius: 0.5rem;
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .color-card {
            transition: all 0.3s ease;
        }
        
        .color-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        }
        
        .slider {
            -webkit-appearance: none;
            appearance: none;
            height: 8px;
            border-radius: 4px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: white;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }
        
        .toast {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        .color-harmony-item {
            transition: all 0.2s ease;
        }
        
        .color-harmony-item:hover {
            transform: scale(1.1);
            z-index: 10;
        }
        
        .contrast-result {
            transition: all 0.3s ease;
        }
        
        .palette-color {
            transition: all 0.2s ease;
        }
        
        .palette-color:hover {
            transform: scale(1.05);
            z-index: 5;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="gradient-bg text-white shadow-lg">
        <div class="container mx-auto px-4 py-6">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <i class="fas fa-palette text-3xl"></i>
                    <h1 class="text-2xl font-bold">Color Studio</h1>
                </div>
                <p class="text-sm opacity-90">Alat Warna Profesional & Lengkap</p>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Color Picker Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 flex items-center">
                <i class="fas fa-eye-dropper mr-3 text-purple-600"></i>
                Color Picker
            </h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <!-- Left Side - Color Display -->
                <div class="space-y-6">
                    <div id="colorDisplay" class="h-64 rounded-xl shadow-inner transition-all duration-300" 
                         style="background-color: #667eea;">
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="flex flex-wrap gap-3">
                        <button onclick="copyColor('hex')" 
                                class="flex-1 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors">
                            <i class="fas fa-copy mr-2"></i>Copy HEX
                        </button>
                        <button onclick="copyColor('rgb')" 
                                class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fas fa-copy mr-2"></i>Copy RGB
                        </button>
                        <button onclick="copyColor('hsl')" 
                                class="flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fas fa-copy mr-2"></i>Copy HSL
                        </button>
                    </div>
                    
                    <!-- Additional Actions -->
                    <div class="flex flex-wrap gap-3">
                        <button onclick="generateRandomColor()" 
                                class="flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors">
                            <i class="fas fa-random mr-2"></i>Random Color
                        </button>
                        <button onclick="saveToFavorites()" 
                                class="flex-1 bg-yellow-600 text-white px-4 py-2 rounded-lg hover:bg-yellow-700 transition-colors">
                            <i class="fas fa-star mr-2"></i>Save Favorite
                        </button>
                    </div>
                </div>
                
                <!-- Right Side - Color Inputs -->
                <div class="space-y-4">
                    <!-- Native Color Picker -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-palette mr-2"></i>Pilih Warna
                        </label>
                        <input type="color" id="colorPicker" value="#667eea" 
                               class="color-input w-full h-16 rounded-lg cursor-pointer">
                    </div>
                    
                    <!-- HEX Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">HEX</label>
                        <div class="flex">
                            <span class="inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500">
                                #
                            </span>
                            <input type="text" id="hexInput" value="667eea" 
                                   class="flex-1 min-w-0 block w-full px-3 py-2 rounded-r-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                                   placeholder="667eea">
                        </div>
                    </div>
                    
                    <!-- RGB Inputs -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">RGB</label>
                        <div class="grid grid-cols-3 gap-2">
                            <div>
                                <input type="number" id="rInput" value="102" min="0" max="255"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                                       placeholder="R">
                                <span class="text-xs text-gray-500">Red</span>
                            </div>
                            <div>
                                <input type="number" id="gInput" value="126" min="0" max="255"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                                       placeholder="G">
                                <span class="text-xs text-gray-500">Green</span>
                            </div>
                            <div>
                                <input type="number" id="bInput" value="234" min="0" max="255"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                                       placeholder="B">
                                <span class="text-xs text-gray-500">Blue</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- RGBA Input -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">RGBA</label>
                        <div class="grid grid-cols-4 gap-2">
                            <div>
                                <input type="number" id="rgbaR" value="102" min="0" max="255"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500">
                                <span class="text-xs text-gray-500">R</span>
                            </div>
                            <div>
                                <input type="number" id="rgbaG" value="126" min="0" max="255"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500">
                                <span class="text-xs text-gray-500">G</span>
                            </div>
                            <div>
                                <input type="number" id="rgbaB" value="234" min="0" max="255"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500">
                                <span class="text-xs text-gray-500">B</span>
                            </div>
                            <div>
                                <input type="number" id="rgbaA" value="1" min="0" max="1" step="0.01"
                                       class="w-full px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500">
                                <span class="text-xs text-gray-500">A</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Color Search Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 flex items-center">
                <i class="fas fa-search mr-3 text-purple-600"></i>
                Pencarian Warna
            </h2>
            
            <div class="mb-6">
                <div class="relative">
                    <input type="text" id="colorSearch" 
                           class="w-full px-4 py-3 pl-12 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                           placeholder="Cari warna berdasarkan nama, HEX, RGB, atau kata kunci...">
                    <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                </div>
            </div>
            
            <!-- Color Categories -->
            <div class="mb-6">
                <h3 class="text-lg font-medium mb-3">Kategori Warna</h3>
                <div class="flex flex-wrap gap-2">
                    <button onclick="filterByCategory('all')" 
                            class="category-btn px-4 py-2 rounded-full bg-purple-600 text-white hover:bg-purple-700 transition-colors">
                        Semua
                    </button>
                    <button onclick="filterByCategory('red')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Merah
                    </button>
                    <button onclick="filterByCategory('blue')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Biru
                    </button>
                    <button onclick="filterByCategory('green')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Hijau
                    </button>
                    <button onclick="filterByCategory('yellow')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Kuning
                    </button>
                    <button onclick="filterByCategory('purple')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Ungu
                    </button>
                    <button onclick="filterByCategory('pink')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Pink
                    </button>
                    <button onclick="filterByCategory('orange')" 
                            class="category-btn px-4 py-2 rounded-full bg-gray-200 text-gray-700 hover:bg-gray-300 transition-colors">
                        Oranye
                    </button>
                </div>
            </div>
            
            <!-- Color Results Grid -->
            <div id="colorResults" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
                <!-- Colors will be dynamically inserted here -->
            </div>
        </section>

        <!-- Color Harmony Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 flex items-center">
                <i class="fas fa-palette mr-3 text-purple-600"></i>
                Harmoni Warna
            </h2>
            
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4" id="colorHarmony">
                <!-- Harmony colors will be dynamically inserted here -->
            </div>
        </section>

        <!-- Color Contrast Checker Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 flex items-center">
                <i class="fas fa-adjust mr-3 text-purple-600"></i>
                Pemeriksa Kontras Warna
            </h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div>
                    <h3 class="text-lg font-medium mb-3">Warna 1 (Teks)</h3>
                    <div class="flex items-center space-x-4 mb-4">
                        <input type="color" id="contrastColor1" value="#667eea" 
                               class="color-input w-16 h-16 rounded-lg cursor-pointer">
                        <input type="text" id="contrastHex1" value="667eea" 
                               class="flex-1 px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                               placeholder="HEX">
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-medium mb-3">Warna 2 (Latar)</h3>
                    <div class="flex items-center space-x-4 mb-4">
                        <input type="color" id="contrastColor2" value="#ffffff" 
                               class="color-input w-16 h-16 rounded-lg cursor-pointer">
                        <input type="text" id="contrastHex2" value="ffffff" 
                               class="flex-1 px-3 py-2 rounded-lg border border-gray-300 focus:ring-purple-500 focus:border-purple-500"
                               placeholder="HEX">
                    </div>
                </div>
            </div>
            
            <div class="mt-6">
                <button onclick="checkContrast()" 
                        class="bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 transition-colors">
                    <i class="fas fa-calculator mr-2"></i>Periksa Kontras
                </button>
            </div>
            
            <div id="contrastResult" class="mt-6 p-4 rounded-lg hidden">
                <!-- Contrast result will be displayed here -->
            </div>
        </section>

        <!-- Color Palette Generator Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <h2 class="text-2xl font-semibold mb-6 flex items-center">
                <i class="fas fa-swatchbook mr-3 text-purple-600"></i>
                Generator Palet Warna
            </h2>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Palet</label>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                    <button onclick="generatePalette('analogous')" 
                            class="palette-type-btn px-4 py-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                        <i class="fas fa-adjust mb-2"></i>
                        <p class="font-medium">Analog</p>
                    </button>
                    <button onclick="generatePalette('complementary')" 
                            class="palette-type-btn px-4 py-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                        <i class="fas fa-circle-half-stroke mb-2"></i>
                        <p class="font-medium">Komplementer</p>
                    </button>
                    <button onclick="generatePalette('triadic')" 
                            class="palette-type-btn px-4 py-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                        <i class="fas fa-shapes mb-2"></i>
                        <p class="font-medium">Triadik</p>
                    </button>
                    <button onclick="generatePalette('tetradic')" 
                            class="palette-type-btn px-4 py-3 rounded-lg bg-gray-100 hover:bg-gray-200 transition-colors">
                        <i class="fas fa-dice-four mb-2"></i>
                        <p class="font-medium">Tetradik</p>
                    </button>
                </div>
            </div>
            
            <div id="paletteResult" class="grid grid-cols-2 md:grid-cols-5 gap-4">
                <!-- Palette colors will be displayed here -->
            </div>
        </section>

        <!-- Color History Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold flex items-center">
                    <i class="fas fa-history mr-3 text-purple-600"></i>
                    Riwayat Warna
                </h2>
                <button onclick="clearHistory()" 
                        class="text-red-600 hover:text-red-700 transition-colors">
                    <i class="fas fa-trash mr-2"></i>Hapus Semua
                </button>
            </div>
            
            <div id="colorHistory" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-8 gap-4">
                <!-- History colors will be dynamically inserted here -->
            </div>
        </section>

        <!-- Favorite Colors Section -->
        <section class="bg-white rounded-2xl shadow-xl p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-semibold flex items-center">
                    <i class="fas fa-star mr-3 text-yellow-500"></i>
                    Warna Favorit
                </h2>
                <button onclick="clearFavorites()" 
                        class="text-red-600 hover:text-red-700 transition-colors">
                    <i class="fas fa-trash mr-2"></i>Hapus Semua
                </button>
            </div>
            
            <div id="favoriteColors" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-8 gap-4">
                <!-- Favorite colors will be dynamically inserted here -->
            </div>
        </section>
    </main>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-4 right-4 bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg hidden toast">
        <i class="fas fa-check-circle mr-2"></i>
        <span id="toastMessage">Berhasil disalin!</span>
    </div>

    <script>
        // Color database with names and categories
        const colorDatabase = [
            // Red colors
            { name: 'Merah', hex: '#FF0000', rgb: '255,0,0', category: 'red' },
            { name: 'Crimson', hex: '#DC143C', rgb: '220,20,60', category: 'red' },
            { name: 'Dark Red', hex: '#8B0000', rgb: '139,0,0', category: 'red' },
            { name: 'Fire Brick', hex: '#B22222', rgb: '178,34,34', category: 'red' },
            { name: 'Indian Red', hex: '#CD5C5C', rgb: '205,92,92', category: 'red' },
            { name: 'Light Coral', hex: '#F08080', rgb: '240,128,128', category: 'red' },
            { name: 'Salmon', hex: '#FA8072', rgb: '250,128,114', category: 'red' },
            { name: 'Dark Salmon', hex: '#E9967A', rgb: '233,150,122', category: 'red' },
            
            // Blue colors
            { name: 'Biru', hex: '#0000FF', rgb: '0,0,255', category: 'blue' },
            { name: 'Navy', hex: '#000080', rgb: '0,0,128', category: 'blue' },
            { name: 'Royal Blue', hex: '#4169E1', rgb: '65,105,225', category: 'blue' },
            { name: 'Sky Blue', hex: '#87CEEB', rgb: '135,206,235', category: 'blue' },
            { name: 'Light Blue', hex: '#ADD8E6', rgb: '173,216,230', category: 'blue' },
            { name: 'Steel Blue', hex: '#4682B4', rgb: '70,130,180', category: 'blue' },
            { name: 'Dodger Blue', hex: '#1E90FF', rgb: '30,144,255', category: 'blue' },
            { name: 'Cornflower Blue', hex: '#6495ED', rgb: '100,149,237', category: 'blue' },
            
            // Green colors
            { name: 'Hijau', hex: '#008000', rgb: '0,128,0', category: 'green' },
            { name: 'Lime', hex: '#00FF00', rgb: '0,255,0', category: 'green' },
            { name: 'Dark Green', hex: '#006400', rgb: '0,100,0', category: 'green' },
            { name: 'Forest Green', hex: '#228B22', rgb: '34,139,34', category: 'green' },
            { name: 'Sea Green', hex: '#2E8B57', rgb: '46,139,87', category: 'green' },
            { name: 'Light Green', hex: '#90EE90', rgb: '144,238,144', category: 'green' },
            { name: 'Pale Green', hex: '#98FB98', rgb: '152,251,152', category: 'green' },
            { name: 'Spring Green', hex: '#00FF7F', rgb: '0,255,127', category: 'green' },
            
            // Yellow colors
            { name: 'Kuning', hex: '#FFFF00', rgb: '255,255,0', category: 'yellow' },
            { name: 'Gold', hex: '#FFD700', rgb: '255,215,0', category: 'yellow' },
            { name: 'Goldenrod', hex: '#DAA520', rgb: '218,165,32', category: 'yellow' },
            { name: 'Light Yellow', hex: '#FFFFE0', rgb: '255,255,224', category: 'yellow' },
            { name: 'Lemon Chiffon', hex: '#FFFACD', rgb: '255,250,205', category: 'yellow' },
            { name: 'Papaya Whip', hex: '#FFEFD5', rgb: '255,239,213', category: 'yellow' },
            { name: 'Moccasin', hex: '#FFE4B5', rgb: '255,228,181', category: 'yellow' },
            { name: 'Peach Puff', hex: '#FFDAB9', rgb: '255,218,185', category: 'yellow' },
            
            // Purple colors
            { name: 'Ungu', hex: '#800080', rgb: '128,0,128', category: 'purple' },
            { name: 'Indigo', hex: '#4B0082', rgb: '75,0,130', category: 'purple' },
            { name: 'Violet', hex: '#EE82EE', rgb: '238,130,238', category: 'purple' },
            { name: 'Plum', hex: '#DDA0DD', rgb: '221,160,221', category: 'purple' },
            { name: 'Orchid', hex: '#DA70D6', rgb: '218,112,214', category: 'purple' },
            { name: 'Magenta', hex: '#FF00FF', rgb: '255,0,255', category: 'purple' },
            { name: 'Medium Purple', hex: '#9370DB', rgb: '147,112,219', category: 'purple' },
            { name: 'Rebecca Purple', hex: '#663399', rgb: '102,51,153', category: 'purple' },
            
            // Pink colors
            { name: 'Pink', hex: '#FFC0CB', rgb: '255,192,203', category: 'pink' },
            { name: 'Hot Pink', hex: '#FF69B4', rgb: '255,105,180', category: 'pink' },
            { name: 'Deep Pink', hex: '#FF1493', rgb: '255,20,147', category: 'pink' },
            { name: 'Light Pink', hex: '#FFB6C1', rgb: '255,182,193', category: 'pink' },
            { name: 'Pale Violet Red', hex: '#DB7093', rgb: '219,112,147', category: 'pink' },
            { name: 'Medium Violet Red', hex: '#C71585', rgb: '199,21,133', category: 'pink' },
            { name: 'Orchid', hex: '#DA70D6', rgb: '218,112,214', category: 'pink' },
            { name: 'Thistle', hex: '#D8BFD8', rgb: '216,191,216', category: 'pink' },
            
            // Orange colors
            { name: 'Oranye', hex: '#FFA500', rgb: '255,165,0', category: 'orange' },
            { name: 'Dark Orange', hex: '#FF8C00', rgb: '255,140,0', category: 'orange' },
            { name: 'Coral', hex: '#FF7F50', rgb: '255,127,80', category: 'orange' },
            { name: 'Tomato', hex: '#FF6347', rgb: '255,99,71', category: 'orange' },
            { name: 'Orange Red', hex: '#FF4500', rgb: '255,69,0', category: 'orange' },
            { name: 'Dark Salmon', hex: '#E9967A', rgb: '233,150,122', category: 'orange' },
            { name: 'Light Salmon', hex: '#FFA07A', rgb: '255,160,122', category: 'orange' },
            { name: 'Sienna', hex: '#A0522D', rgb: '160,82,45', category: 'orange' }
        ];

        // Global variables
        let currentColor = '#667eea';
        let colorHistory = JSON.parse(localStorage.getItem('colorHistory')) || [];
        let favoriteColors = JSON.parse(localStorage.getItem('favoriteColors')) || [];

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            displayAllColors();
            updateColorHarmony();
            displayColorHistory();
            displayFavoriteColors();
            
            // Event listeners
            document.getElementById('colorPicker').addEventListener('input', handleColorChange);
            document.getElementById('hexInput').addEventListener('input', handleHexInput);
            document.getElementById('rInput').addEventListener('input', handleRGBInput);
            document.getElementById('gInput').addEventListener('input', handleRGBInput);
            document.getElementById('bInput').addEventListener('input', handleRGBInput);
            document.getElementById('rgbaR').addEventListener('input', handleRGBAInput);
            document.getElementById('rgbaG').addEventListener('input', handleRGBAInput);
            document.getElementById('rgbaB').addEventListener('input', handleRGBAInput);
            document.getElementById('rgbaA').addEventListener('input', handleRGBAInput);
            document.getElementById('colorSearch').addEventListener('input', handleColorSearch);
            
            // Contrast checker event listeners
            document.getElementById('contrastColor1').addEventListener('input', updateContrastHex1);
            document.getElementById('contrastColor2').addEventListener('input', updateContrastHex2);
            document.getElementById('contrastHex1').addEventListener('input', updateContrastColor1);
            document.getElementById('contrastHex2').addEventListener('input', updateContrastColor2);
        });

        // Color change handler
        function handleColorChange(e) {
            currentColor = e.target.value;
            updateAllInputs();
            updateColorDisplay();
            addToHistory(currentColor);
        }

        // HEX input handler
        function handleHexInput(e) {
            let hex = e.target.value.replace('#', '');
            if (hex.length === 6 && /^[0-9A-Fa-f]{6}$/.test(hex)) {
                currentColor = '#' + hex;
                updateAllInputs();
                updateColorDisplay();
                addToHistory(currentColor);
            }
        }

        // RGB input handler
        function handleRGBInput() {
            const r = parseInt(document.getElementById('rInput').value) || 0;
            const g = parseInt(document.getElementById('gInput').value) || 0;
            const b = parseInt(document.getElementById('bInput').value) || 0;
            
            if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255) {
                currentColor = rgbToHex(r, g, b);
                updateAllInputs();
                updateColorDisplay();
                addToHistory(currentColor);
            }
        }

        // RGBA input handler
        function handleRGBAInput() {
            const r = parseInt(document.getElementById('rgbaR').value) || 0;
            const g = parseInt(document.getElementById('rgbaG').value) || 0;
            const b = parseInt(document.getElementById('rgbaB').value) || 0;
            const a = parseFloat(document.getElementById('rgbaA').value) || 1;
            
            if (r >= 0 && r <= 255 && g >= 0 && g <= 255 && b >= 0 && b <= 255 && a >= 0 && a <= 1) {
                currentColor = rgbToHex(r, g, b);
                updateAllInputs();
                updateColorDisplay();
                addToHistory(currentColor);
            }
        }

        // Update all inputs with current color
        function updateAllInputs() {
            const rgb = hexToRgb(currentColor);
            
            document.getElementById('colorPicker').value = currentColor;
            document.getElementById('hexInput').value = currentColor.replace('#', '');
            document.getElementById('rInput').value = rgb.r;
            document.getElementById('gInput').value = rgb.g;
            document.getElementById('bInput').value = rgb.b;
            document.getElementById('rgbaR').value = rgb.r;
            document.getElementById('rgbaG').value = rgb.g;
            document.getElementById('rgbaB').value = rgb.b;
        }

        // Update color display
        function updateColorDisplay() {
            document.getElementById('colorDisplay').style.backgroundColor = currentColor;
            updateColorHarmony();
        }

        // Convert HEX to RGB
        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // Convert RGB to HEX
        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        // Convert RGB to HSL
        function rgbToHsl(r, g, b) {
            r /= 255;
            g /= 255;
            b /= 255;
            
            const max = Math.max(r, g, b);
            const min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;

            if (max === min) {
                h = s = 0;
            } else {
                const d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                
                switch (max) {
                    case r: h = ((g - b) / d + (g < b ? 6 : 0)) / 6; break;
                    case g: h = ((b - r) / d + 2) / 6; break;
                    case b: h = ((r - g) / d + 4) / 6; break;
                }
            }

            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }

        // Display all colors
        function displayAllColors() {
            const container = document.getElementById('colorResults');
            container.innerHTML = '';
            
            colorDatabase.forEach(color => {
                const colorCard = createColorCard(color);
                container.appendChild(colorCard);
            });
        }

        // Create color card
        function createColorCard(color) {
            const card = document.createElement('div');
            card.className = 'color-card cursor-pointer group';
            card.innerHTML = `
                <div class="h-24 rounded-lg shadow-md mb-2 transition-all duration-300 group-hover:shadow-xl" 
                     style="background-color: ${color.hex}"></div>
                <p class="text-sm font-medium text-gray-700 truncate">${color.name}</p>
                <p class="text-xs text-gray-500">${color.hex}</p>
            `;
            
            card.addEventListener('click', () => {
                currentColor = color.hex;
                updateAllInputs();
                updateColorDisplay();
                addToHistory(currentColor);
            });
            
            return card;
        }

        // Filter by category
        function filterByCategory(category) {
            // Update button styles
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('bg-purple-600', 'text-white');
                btn.classList.add('bg-gray-200', 'text-gray-700');
            });
            event.target.classList.remove('bg-gray-200', 'text-gray-700');
            event.target.classList.add('bg-purple-600', 'text-white');
            
            // Filter colors
            const container = document.getElementById('colorResults');
            container.innerHTML = '';
            
            const filteredColors = category === 'all' 
                ? colorDatabase 
                : colorDatabase.filter(color => color.category === category);
            
            filteredColors.forEach(color => {
                const colorCard = createColorCard(color);
                container.appendChild(colorCard);
            });
        }

        // Handle color search
        function handleColorSearch(e) {
            const searchTerm = e.target.value.toLowerCase();
            const container = document.getElementById('colorResults');
            container.innerHTML = '';
            
            if (searchTerm === '') {
                displayAllColors();
                return;
            }
            
            const filteredColors = colorDatabase.filter(color => 
                color.name.toLowerCase().includes(searchTerm) ||
                color.hex.toLowerCase().includes(searchTerm) ||
                color.rgb.includes(searchTerm)
            );
            
            filteredColors.forEach(color => {
                const colorCard = createColorCard(color);
                container.appendChild(colorCard);
            });
        }

        // Update color harmony
        function updateColorHarmony() {
            const rgb = hexToRgb(currentColor);
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            
            const harmonies = [
                { name: 'Analogous 1', h: (hsl.h + 30) % 360 },
                { name: 'Analogous 2', h: (hsl.h - 30 + 360) % 360 },
                { name: 'Complementary', h: (hsl.h + 180) % 360 },
                { name: 'Triadic 1', h: (hsl.h + 120) % 360 },
                { name: 'Triadic 2', h: (hsl.h + 240) % 360 },
                { name: 'Original', h: hsl.h }
            ];
            
            const container = document.getElementById('colorHarmony');
            container.innerHTML = '';
            
            harmonies.forEach(harmony => {
                const hex = hslToHex(harmony.h, hsl.s, hsl.l);
                const card = document.createElement('div');
                card.className = 'color-harmony-item cursor-pointer text-center';
                card.innerHTML = `
                    <div class="h-20 rounded-lg shadow-md mb-2" style="background-color: ${hex}"></div>
                    <p class="text-xs font-medium text-gray-700">${harmony.name}</p>
                    <p class="text-xs text-gray-500">${hex}</p>
                `;
                
                card.addEventListener('click', () => {
                    currentColor = hex;
                    updateAllInputs();
                    updateColorDisplay();
                    addToHistory(currentColor);
                });
                
                container.appendChild(card);
            });
        }

        // Convert HSL to HEX
        function hslToHex(h, s, l) {
            h /= 360;
            s /= 100;
            l /= 100;
            
            let r, g, b;
            
            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            
            const toHex = x => {
                const hex = Math.round(x * 255).toString(16);
                return hex.length === 1 ? '0' + hex : hex;
            };
            
            return `#${toHex(r)}${toHex(g)}${toHex(b)}`;
        }

        // Add color to history
        function addToHistory(color) {
            if (!colorHistory.includes(color)) {
                colorHistory.unshift(color);
                if (colorHistory.length > 16) {
                    colorHistory.pop();
                }
                localStorage.setItem('colorHistory', JSON.stringify(colorHistory));
                displayColorHistory();
            }
        }

        // Display color history
        function displayColorHistory() {
            const container = document.getElementById('colorHistory');
            container.innerHTML = '';
            
            if (colorHistory.length === 0) {
                container.innerHTML = '<p class="col-span-full text-center text-gray-500">Belum ada riwayat warna</p>';
                return;
            }
            
            colorHistory.forEach(color => {
                const card = document.createElement('div');
                card.className = 'color-card cursor-pointer group';
                card.innerHTML = `
                    <div class="h-16 rounded-lg shadow-md mb-1 transition-all duration-300 group-hover:shadow-xl" 
                         style="background-color: ${color}"></div>
                    <p class="text-xs text-gray-500 truncate">${color}</p>
                `;
                
                card.addEventListener('click', () => {
                    currentColor = color;
                    updateAllInputs();
                    updateColorDisplay();
                });
                
                container.appendChild(card);
            });
        }

        // Clear history
        function clearHistory() {
            colorHistory = [];
            localStorage.removeItem('colorHistory');
            displayColorHistory();
            showToast('Riwayat berhasil dihapus!');
        }

        // Copy color to clipboard
        function copyColor(format) {
            const rgb = hexToRgb(currentColor);
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            
            let textToCopy = '';
            
            switch(format) {
                case 'hex':
                    textToCopy = currentColor;
                    break;
                case 'rgb':
                    textToCopy = `rgb(${rgb.r}, ${rgb.g}, ${rgb.b})`;
                    break;
                case 'hsl':
                    textToCopy = `hsl(${hsl.h}, ${hsl.s}%, ${hsl.l}%)`;
                    break;
            }
            
            navigator.clipboard.writeText(textToCopy).then(() => {
                showToast(`${format.toUpperCase()} berhasil disalin: ${textToCopy}`);
            });
        }

        // Show toast notification
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            // Set toast color based on type
            toast.className = `fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg toast`;
            
            if (type === 'success') {
                toast.classList.add('bg-green-600', 'text-white');
            } else if (type === 'error') {
                toast.classList.add('bg-red-600', 'text-white');
            } else if (type === 'warning') {
                toast.classList.add('bg-yellow-600', 'text-white');
            }
            
            toastMessage.textContent = message;
            toast.classList.remove('hidden');
            
            setTimeout(() => {
                toast.classList.add('hidden');
            }, 3000);
        }

        // Generate random color
        function generateRandomColor() {
            const randomColor = '#' + Math.floor(Math.random()*16777215).toString(16).padStart(6, '0');
            currentColor = randomColor;
            updateAllInputs();
            updateColorDisplay();
            addToHistory(currentColor);
            showToast('Warna acak berhasil dibuat!');
        }

        // Save color to favorites
        function saveToFavorites() {
            if (!favoriteColors.includes(currentColor)) {
                favoriteColors.unshift(currentColor);
                if (favoriteColors.length > 16) {
                    favoriteColors.pop();
                }
                localStorage.setItem('favoriteColors', JSON.stringify(favoriteColors));
                displayFavoriteColors();
                showToast('Warna berhasil disimpan ke favorit!');
            } else {
                showToast('Warna sudah ada di favorit!', 'warning');
            }
        }

        // Display favorite colors
        function displayFavoriteColors() {
            const container = document.getElementById('favoriteColors');
            container.innerHTML = '';
            
            if (favoriteColors.length === 0) {
                container.innerHTML = '<p class="col-span-full text-center text-gray-500">Belum ada warna favorit</p>';
                return;
            }
            
            favoriteColors.forEach(color => {
                const card = document.createElement('div');
                card.className = 'color-card cursor-pointer group relative';
                card.innerHTML = `
                    <div class="h-16 rounded-lg shadow-md mb-1 transition-all duration-300 group-hover:shadow-xl" 
                         style="background-color: ${color}"></div>
                    <p class="text-xs text-gray-500 truncate">${color}</p>
                    <button onclick="removeFromFavorites('${color}')" 
                            class="absolute top-1 right-1 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity">
                        <i class="fas fa-times text-xs"></i>
                    </button>
                `;
                
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('button')) {
                        currentColor = color;
                        updateAllInputs();
                        updateColorDisplay();
                    }
                });
                
                container.appendChild(card);
            });
        }

        // Remove color from favorites
        function removeFromFavorites(color) {
            favoriteColors = favoriteColors.filter(c => c !== color);
            localStorage.setItem('favoriteColors', JSON.stringify(favoriteColors));
            displayFavoriteColors();
            showToast('Warna berhasil dihapus dari favorit!');
        }

        // Clear favorites
        function clearFavorites() {
            favoriteColors = [];
            localStorage.removeItem('favoriteColors');
            displayFavoriteColors();
            showToast('Semua warna favorit berhasil dihapus!');
        }

        // Contrast checker functions
        function updateContrastHex1(e) {
            document.getElementById('contrastHex1').value = e.target.value.replace('#', '');
        }

        function updateContrastHex2(e) {
            document.getElementById('contrastHex2').value = e.target.value.replace('#', '');
        }

        function updateContrastColor1(e) {
            let hex = e.target.value.replace('#', '');
            if (hex.length === 6 && /^[0-9A-Fa-f]{6}$/.test(hex)) {
                document.getElementById('contrastColor1').value = '#' + hex;
            }
        }

        function updateContrastColor2(e) {
            let hex = e.target.value.replace('#', '');
            if (hex.length === 6 && /^[0-9A-Fa-f]{6}$/.test(hex)) {
                document.getElementById('contrastColor2').value = '#' + hex;
            }
        }

        function checkContrast() {
            const color1 = document.getElementById('contrastColor1').value;
            const color2 = document.getElementById('contrastColor2').value;
            
            const rgb1 = hexToRgb(color1);
            const rgb2 = hexToRgb(color2);
            
            if (!rgb1 || !rgb2) {
                showToast('Warna tidak valid!', 'error');
                return;
            }
            
            const contrastRatio = calculateContrastRatio(rgb1, rgb2);
            const resultContainer = document.getElementById('contrastResult');
            
            let wcagLevel = '';
            let levelClass = '';
            
            if (contrastRatio >= 7) {
                wcagLevel = 'AAA (Optimal)';
                levelClass = 'bg-green-100 text-green-800 border-green-300';
            } else if (contrastRatio >= 4.5) {
                wcagLevel = 'AA (Good)';
                levelClass = 'bg-blue-100 text-blue-800 border-blue-300';
            } else if (contrastRatio >= 3) {
                wcagLevel = 'AA Large (Minimum)';
                levelClass = 'bg-yellow-100 text-yellow-800 border-yellow-300';
            } else {
                wcagLevel = 'Fail (Insufficient)';
                levelClass = 'bg-red-100 text-red-800 border-red-300';
            }
            
            resultContainer.innerHTML = `
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="w-10 h-10 rounded-lg mr-3" style="background-color: ${color1}"></div>
                        <div>
                            <p class="font-medium">Warna Teks</p>
                            <p class="text-sm text-gray-600">${color1}</p>
                        </div>
                    </div>
                    <div class="text-2xl font-bold">${contrastRatio.toFixed(2)}:1</div>
                    <div class="flex items-center">
                        <div>
                            <p class="font-medium">Warna Latar</p>
                            <p class="text-sm text-gray-600">${color2}</p>
                        </div>
                        <div class="w-10 h-10 rounded-lg ml-3" style="background-color: ${color2}"></div>
                    </div>
                </div>
                <div class="p-3 rounded-lg border ${levelClass}">
                    <p class="font-medium">Level WCAG: ${wcagLevel}</p>
                </div>
                <div class="mt-4 p-3 rounded-lg bg-gray-100">
                    <p class="text-sm">Rasio kontras menentukan seberapa mudah teks terbaca terhadap latar belakangnya. Semakin tinggi rasionya, semakin baik keterbacaannya.</p>
                </div>
            `;
            
            resultContainer.classList.remove('hidden');
            resultContainer.classList.add('contrast-result');
        }

        function calculateContrastRatio(rgb1, rgb2) {
            const l1 = calculateLuminance(rgb1.r, rgb1.g, rgb1.b);
            const l2 = calculateLuminance(rgb2.r, rgb2.g, rgb2.b);
            
            const lighter = Math.max(l1, l2);
            const darker = Math.min(l1, l2);
            
            return (lighter + 0.05) / (darker + 0.05);
        }

        function calculateLuminance(r, g, b) {
            const sRGB = [r, g, b].map(val => {
                val = val / 255;
                return val <= 0.03928 ? val / 12.92 : Math.pow((val + 0.055) / 1.055, 2.4);
            });
            
            return 0.2126 * sRGB[0] + 0.7152 * sRGB[1] + 0.0722 * sRGB[2];
        }

        // Palette generator functions
        function generatePalette(type) {
            const rgb = hexToRgb(currentColor);
            const hsl = rgbToHsl(rgb.r, rgb.g, rgb.b);
            
            let palette = [];
            
            switch(type) {
                case 'analogous':
                    palette = [
                        { name: 'Base', h: hsl.h },
                        { name: 'Analog 1', h: (hsl.h + 30) % 360 },
                        { name: 'Analog 2', h: (hsl.h + 60) % 360 },
                        { name: 'Analog 3', h: (hsl.h - 30 + 360) % 360 },
                        { name: 'Analog 4', h: (hsl.h - 60 + 360) % 360 }
                    ];
                    break;
                    
                case 'complementary':
                    palette = [
                        { name: 'Base', h: hsl.h },
                        { name: 'Complement', h: (hsl.h + 180) % 360 },
                        { name: 'Light Base', h: hsl.h, s: Math.max(10, hsl.s - 20), l: Math.min(90, hsl.l + 20) },
                        { name: 'Dark Base', h: hsl.h, s: Math.min(100, hsl.s + 20), l: Math.max(10, hsl.l - 20) },
                        { name: 'Light Complement', h: (hsl.h + 180) % 360, s: Math.max(10, hsl.s - 20), l: Math.min(90, hsl.l + 20) }
                    ];
                    break;
                    
                case 'triadic':
                    palette = [
                        { name: 'Base', h: hsl.h },
                        { name: 'Triad 1', h: (hsl.h + 120) % 360 },
                        { name: 'Triad 2', h: (hsl.h + 240) % 360 },
                        { name: 'Light Base', h: hsl.h, s: Math.max(10, hsl.s - 20), l: Math.min(90, hsl.l + 20) },
                        { name: 'Dark Base', h: hsl.h, s: Math.min(100, hsl.s + 20), l: Math.max(10, hsl.l - 20) }
                    ];
                    break;
                    
                case 'tetradic':
                    palette = [
                        { name: 'Base', h: hsl.h },
                        { name: 'Tetrad 1', h: (hsl.h + 90) % 360 },
                        { name: 'Tetrad 2', h: (hsl.h + 180) % 360 },
                        { name: 'Tetrad 3', h: (hsl.h + 270) % 360 },
                        { name: 'Light Base', h: hsl.h, s: Math.max(10, hsl.s - 20), l: Math.min(90, hsl.l + 20) }
                    ];
                    break;
            }
            
            displayPalette(palette);
        }

        function displayPalette(palette) {
            const container = document.getElementById('paletteResult');
            container.innerHTML = '';
            
            palette.forEach(color => {
                const hex = hslToHex(color.h, color.s || rgbToHsl(hexToRgb(currentColor).r, hexToRgb(currentColor).g, hexToRgb(currentColor).b).s, color.l || rgbToHsl(hexToRgb(currentColor).r, hexToRgb(currentColor).g, hexToRgb(currentColor).b).l);
                
                const card = document.createElement('div');
                card.className = 'palette-color cursor-pointer text-center';
                card.innerHTML = `
                    <div class="h-24 rounded-lg shadow-md mb-2" style="background-color: ${hex}"></div>
                    <p class="text-sm font-medium text-gray-700">${color.name}</p>
                    <p class="text-xs text-gray-500">${hex}</p>
                    <button onclick="copyColorHex('${hex}')" class="mt-1 text-xs text-purple-600 hover:text-purple-800">
                        <i class="fas fa-copy mr-1"></i>Copy
                    </button>
                `;
                
                card.addEventListener('click', (e) => {
                    if (!e.target.closest('button')) {
                        currentColor = hex;
                        updateAllInputs();
                        updateColorDisplay();
                        addToHistory(currentColor);
                    }
                });
                
                container.appendChild(card);
            });
        }

        function copyColorHex(hex) {
            navigator.clipboard.writeText(hex).then(() => {
                showToast(`HEX berhasil disalin: ${hex}`);
            });
        }
    </script>
</body>
</html>
